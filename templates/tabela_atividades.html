{% extends 'base.html' %}

{% block title %}Tabela de Atividades{% endblock %}

{% block content %}
<div class="tab-container">
    <h2>Tabela de Atividades</h2>
    <div class="tabs">
        <button type="button" class="tab-link active" data-tab="oficina-tab">Oficinas</button>
        <button type="button" class="tab-link" data-tab="curso-tab">Cursos</button>
    </div>

    <!-- ABA OFICINAS -->
    <div class="tab-content active" id="oficina-tab">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome</th>
                    <th>Tipo</th>
                    <th>Horário</th>
                    <th>Instrutor</th>
                    <th>Faixa Etária</th>
                    <th>Dias</th>
                    <th>Status</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for atividade in oficinas %}
                <tr>
                    <td>{{ atividade[0] }}</td>
                    <td>{{ atividade[1] }}</td>
                    <td>{{ atividade[2] }}</td>
                    <td>{{ atividade[3] if atividade[3] else '-' }}</td>
                    <td>{{ atividade[4] }}</td>
                    <td>{{ atividade[5] }} - {{ atividade[6] if atividade[6] else '-' }}</td>
                    <td>{{ ', '.join(atividade[7]) if atividade[7] else '-' }}</td>
                    <td>{{ 'Ativo' if atividade[8] else 'Desativado' }}</td>
                    <td>
    <form method="POST" action="{{ url_for('toggle_atividade', id_atividade=atividade[0]) }}" style="display:inline;">
        <button type="submit">{{ 'Desativar' if atividade[8] else 'Ativar' }}</button>
    </form>

    <!-- Botão Deletar desativado -->
    <button type="button" style="display:inline;" disabled>Deletar</button>

    <!-- Link para imprimir chamada -->
    <a href="{{ url_for('ficha_chamada', atividade_id=atividade[0], mes=0) }}" target="_blank">
    Imprimir Chamada
</a>
</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- ABA CURSOS -->
<div class="tab-content" id="curso-tab">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Tipo</th>
                <th>Horário</th>
                <th>Instrutor</th>
                <th>Faixa Etária</th>
                <th>Dias</th>
                <th>Status</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for atividade in cursos %}
            <tr>
                <td>{{ atividade[0] }}</td>
                <td>{{ atividade[1] }}</td>
                <td>{{ atividade[2] }}</td>
                <td>{{ atividade[3] if atividade[3] else '-' }}</td>
                <td>{{ atividade[4] }}</td>
                <td>
                    {% if atividade[5] and atividade[6] %}
                        {{ atividade[5] }} - {{ atividade[6] }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>
                    {% if atividade[7] %}
                        {{ atividade[7]|join(', ') }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>{{ 'Ativo' if atividade[8] else 'Desativado' }}</td>
                <td>
                    <form method="POST" action="{{ url_for('toggle_atividade', id_atividade=atividade[0]) }}" style="display:inline;">
                        <button type="submit">{{ 'Desativar' if atividade[8] else 'Ativar' }}</button>
                    </form>

                    <!-- Botão Deletar desativado -->
                    <button type="button" style="display:inline;" disabled>Deletar</button>

                    <!-- Link para imprimir chamada -->
                    <a href="{{ url_for('ficha_chamada', atividade_id=atividade[0], mes=12) }}" target="_blank">
                        Imprimir Chamada
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>


<style>
.tab-container {
    max-width: 1200px;
    margin: 30px auto;
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.tabs button {
    background: none;
    border: none;
    padding: 10px 20px;
    font-weight: bold;
    border-bottom: 3px solid transparent;
    cursor: pointer;
}

.tabs button.active {
    border-bottom: 3px solid #4CAF50;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

th, td {
    padding: 12px;
    border: 1px solid #ccc;
    text-align: left;
}

th {
    background-color: #4CAF50;
    color: white;
}

button {
    padding: 4px 8px;
    margin: 0 2px;
    border-radius: 4px;
    border: none;
    cursor: pointer;
}

button:hover {
    opacity: 0.8;
}
</style>

<script>
const tabs = document.querySelectorAll('.tab-link');
const contents = document.querySelectorAll('.tab-content');
tabs.forEach(tab => {
    tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        contents.forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
    });
});
</script>
{% endblock %}
