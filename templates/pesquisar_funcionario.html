{% extends 'base.html' %}

{% block title %}Pesquisar Funcionários{% endblock %}

{% block content %}
<style>
.table-container {
    max-width: 900px;
    margin: 30px auto;
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 8px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

th {
    background-color: #f2f2f2;
}

a.button {
    padding: 5px 10px;
    margin-right: 5px;
    text-decoration: none;
    color: white;
    border-radius: 4px;
}

a.edit-btn {
    background-color: #4CAF50;
}

a.edit-btn:hover {
    background-color: #45a049;
}

a.inativar-btn {
    background-color: #f44336;
}

a.inativar-btn:hover {
    background-color: #da190b;
}

form.search-form {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
}

form.search-form input[type="text"] {
    padding: 6px;
    width: 300px;
    margin-right: 10px;
}

form.search-form button {
    padding: 6px 12px;
    background-color: #2196F3;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

form.search-form button:hover {
    background-color: #1976D2;
}
</style>

<div class="table-container">
    <h2>Pesquisar Funcionários</h2>

    <form method="POST" action="{{ url_for('buscar_funcionario') }}" class="search-form">
        <input type="text" name="termo" placeholder="Digite nome ou CPF" value="{{ termo or '' }}" required>
        <button type="submit">Buscar</button>
    </form>

    {% if funcionarios %}
    <table>
        <thead>
            <tr>
                <th>Nome</th>
                <th>CPF</th>
                <th>Cargo</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for f in funcionarios %}
            <tr>
                <td>{{ f.nome }}</td>
                <td>{{ f.cpf }}</td>
                <td>{{ f.cargo }}</td>
                <td>
                    <a href="{{ url_for('editar_funcionario', funcionario_id=f.id) }}" class="button edit-btn">Editar</a>
                    <a href="{{ url_for('inativar_funcionario', funcionario_id=f.id) }}" class="button inativar-btn">Inativar</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        {% if termo %}
            <p style="text-align:center; margin-top:20px;">Nenhum funcionário encontrado para "{{ termo }}"</p>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
